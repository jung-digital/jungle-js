function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _get=function(t,e,i){for(var n=!0;n;){var s=t,o=e,a=i;r=l=h=void 0,n=!1,null===s&&(s=Function.prototype);var r=Object.getOwnPropertyDescriptor(s,o);if(void 0!==r){if("value"in r)return r.value;var h=r.get;return void 0===h?void 0:h.call(a)}var l=Object.getPrototypeOf(s);if(null===l)return void 0;t=l,e=o,i=a,n=!0}},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Embers=e()}(this,function(){"use strict";function t(t,e){return Math.random()*(e-t)+t}function e(e){return e[Math.floor(t(0,e.length-1e-6))]}function i(t,e){return t.y<e.y}function n(t,e){return t.y>e.y}function s(t,e){return t.x<e.x}function o(t,e){return t.x>e.x}function a(t){return(t-1+2)%4+1}function r(t,e){var a=[];return i(t,e)&&a.push(4),n(t,e)&&a.push(2),s(t,e)&&a.push(3),o(t,e)&&a.push(1),a}function h(t){return t==m.LEFT?new paper.Point(-1,0):t==m.RIGHT?new paper.Point(1,0):t==m.TOP?new paper.Point(0,-1):t==m.BOTTOM?new paper.Point(0,1):void 0}function l(e,i){var n=0;n=e==m.RIGHT?i.right:n,n=e==m.TOP||e==m.BOTTOM?t(0,i.right):n;var s=0;return s=e==m.BOTTOM?i.bottom:s,s=e==m.LEFT||e==m.RIGHT?t(0,i.bottom):s,new paper.Point(n,s)}function c(t,e,i){var n,s,o,a,r,h,l,c;if(0==e)h=l=c=i;else switch(t/=60,n=Math.floor(t),s=t-n,o=i*(1-e),a=i*(1-e*s),r=i*(1-e*(1-s)),n){case 0:h=i,l=r,c=o;break;case 1:h=a,l=i,c=o;break;case 2:h=o,l=i,c=r;break;case 3:h=o,l=a,c=i;break;case 4:h=r,l=o,c=i;break;default:h=i,l=o,c=a}return{r:h,g:l,b:c}}var p=function(){function t(e){_classCallCheck(this,t),this.id=e.id||-1,this.pathRedraw=e.pathRedraw,this.sparkLength=e.sparkLength||200,this.sparkResolution=e.sparkResolution||20,this.options=e,this.paths=[],this.sparking=!1}return _createClass(t,[{key:"reset",value:function(){this.sparking=!1}},{key:"spark",value:function(t){if(!this.sparking){for(var e in t)this.options[e]=t[e];this.onFrameCallback=t.onFrameCallback,this.velocity=t.velocity,this.sparking=!0,this.position=this.options.position,this.points=this.options.position?[this.options.position]:void 0}}},{key:"next",value:function(t){this.position=t,this.points=this.points||[],this.points.push(t),this.points.length>this.sparkResolution&&this.points.shift()}},{key:"onFrame",value:function(t,e){this.sparking&&(this.onFrameCallback&&this.onFrameCallback.call(this,t,e),this.updateTail(t,e))}},{key:"updateTail",value:function(t,e){if(this.points.length>1)for(var i=0;i<this.points.length-1;i++){var n=this.points[this.points.length-(i+1)],s=this.points[this.points.length-(i+2)];this.pathRedraw(this,n,s,i/(this.sparkResolution-1),t,e)}}}]),t}(),u=function R(){_classCallCheck(this,R),this.Spark=p},d=(new u,800),v=800/1.618,f=function(){function t(e,i,n){_classCallCheck(this,t),this.canvas=e,this.ctx=e.getContext("2d"),this.options=i||{},this.lastTime=0,this.canvasTargetWidth=this.width=this.options.width||d,this.canvasTargetHeight=this.height=this.options.width||v,window.addEventListener("resize",this.resizeHandler.bind(this)),e.addEventListener("mousemove",this.onMouseMoveHandler.bind(this)),e.addEventListener("mouseout",this.onMouseOutHandler.bind(this)),e.addEventListener("touchstart",this.onTouchStartHandler.bind(this)),e.addEventListener("touchmove",this.onTouchMoveHandler.bind(this)),e.setAttribute("width",d),e.setAttribute("height",v),n&&e.setAttribute("id",n),window.requestAnimationFrame(this.onFrameFirst.bind(this))}return _createClass(t,[{key:"resizeHandler",value:function(t){var e=Math.min(800,window.innerWidth);canvas.style.width=this.state.canvasTargetWidth=e,canvas.style.height=this.state.canvasTargetHeight=e/1.618,this.resize()}},{key:"resize",value:function(){console.log("Resized!",this.state.canvasTargetWidth,this.state.canvasTargetHeight)}},{key:"onMouseMoveHandler",value:function(){}},{key:"onMouseOutHandler",value:function(){}},{key:"onTouchStartHandler",value:function(){}},{key:"onTouchMoveHandler",value:function(){}},{key:"onFrameFirst",value:function(t){this.lastTime=t,window.requestAnimationFrame(this.onFrame.bind(this))}},{key:"onFrameHandler",value:function(t){this.lastTime?this.elapsed=(t-this.lastTime)/1e3:(this.lastTime=t,this.elapsed=.01)}}]),t}(),m={LEFT:1,TOP:2,RIGHT:3,BOTTOM:4,ran:function(){return Math.floor(t(1,4.99))}},k={ran:t,ranItem:e,Sides:m,isAbove:i,isBelow:n,isLeft:s,isRight:o,reverseOf:a,toward:r,vecFor:h,hsvToRgb:c,getRandomPointFor:l},g=25,y=2,T=.5,b=70,w=20,M=800,S=800/1.61,C=50,O=5e3,F=function(t){function e(t,i){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i),this.options.sparkCount=this.options.sparkCount||g,this.options.maxSparkSize=this.options.maxSparkSize||y,this.options.minSparkSize=this.options.minSparkSize||T,this.options.maxSparkVelocity=this.options.maxSparkVelocity||b,this.options.minSparkVelocity=this.options.minSparkVelocity||w,this.options.sparkCount=this.options.sparkCount||g,this.hue=0,this.sparkSource=new vec2.fromValues(M/2,S/5),this.sparks=[];for(var n=0;n<this.options.sparkCount;n++)this.sparks.push(new p({pathRedraw:this.pathRedraw,sparkResolution:4}))}return _inherits(e,t),_createClass(e,[{key:"pathRedraw",value:function(t,e,i,n,s,o){n=1-n;var a=k.hsvToRgb(t.options.color.h,t.options.color.s,t.options.color.l);o.strokeStyle="rgba("+~~(256*a.r)+","+~~(256*a.g)+","+256*~~a.b+","+n+")",o.lineWidth=t.options.size*n,o.beginPath(),o.moveTo(e[0],e[1]),o.lineTo(i[0],i[1]),o.stroke()}},{key:"onFrame",value:function(t){var e=this;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.elapsed=(t-this.lastTime)/1e3,this.lastTime=t,this.hue=Math.random()*Math.random()*60,this.sparks.forEach(function(t){t.sparking||e.startSpark(t),e.sparkOnFrame.call(t,e),t.onFrame(e.elapsed,e.ctx)}),window.requestAnimationFrame(this.onFrame.bind(this))}},{key:"startSpark",value:function(t){var e=Math.random()-.5-Math.PI/2,i=Math.random()*Math.PI*2,n=Math.random()*C,s=8*Math.random()+2;t.spark({type:2,size:Math.random()*(this.options.maxSparkSize-this.options.minSparkSize)+this.options.minSparkSize,color:{h:25*Math.random()+25,s:.2*Math.random()+.8,l:1},position:vec2.add(vec2.create(),this.sparkSource,vec2.fromValues(Math.cos(i)*n,Math.sin(i)*n)),velocity:vec2.scale(vec2.create(),vec2.fromValues(Math.cos(e),Math.sin(e)),Math.random()*(this.options.maxSparkVelocity-this.options.minSparkVelocity)+this.options.minSparkVelocity),heatCurrent:0,lastAngleChangeTime:0,glow:.8*Math.random()+.2,flickerSpeed:Math.random(),life:s,lifeTotal:s})}},{key:"sparkOnFrame",value:function(t){var e=Math.random()*O+(t.lastTime-this.options.lastAngleChangeTime);if(e>O){var i=1.047*Math.random()-.5235,n=mat2.create();mat2.rotate(n,n,i),vec2.transformMat2(this.options.velocity,this.options.velocity,n),this.options.lastAngleChangeTime=t.lastTime}this.options.heatCurrent+=Math.random(),this.options.life-=t.elapsed,this.options.color.l=this.options.life/this.options.lifeTotal*this.options.glow;var s=vec2.scaleAndAdd(vec2.create(),this.position,this.options.velocity,t.elapsed);this.next(s),(this.options.life<0||s.y>S+50||s.x<-50||s.y<-50||s.x>M+50)&&this.reset()}},{key:"onMouseMoveHandler",value:function(t){var e=this.canvas.getBoundingClientRect(),i=this.WIDTH/this.canvasTargetWidth;this.sparkSource=vec2.fromValues((t.clientX-e.left)*i,(t.clientY-e.top)*i)}},{key:"onTouchMoveHandler",value:function(t){t.preventDefault();var e=this.canvas.getBoundingClientRect(),i=M/this.state.canvasTargetWidth;this.sparkSource=vec2.fromValues((t.touches[0].clientX-e.left)*i,(t.touches[0].clientY-e.top)*i)}}]),e}(f);return F});
//# sourceMappingURL=Embers.min.js.map